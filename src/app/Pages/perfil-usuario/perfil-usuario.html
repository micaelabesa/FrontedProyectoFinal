
<!-- <p>LA BASE URL ES ESTA : private base_url = 'https://upgradehubfinalproject-production.up.railway.app'; Y YA ESTA EL SERVICIO USUARIOS CREADOS </p>
<P>ENTONCES AÑADIREMOS ALLI LAS RUTAS QUE NECESITAMOS QUE SON ESTAS : GET MY RESERVAS /reservas/me </P>
<h1>hello </h1>   -->


<div class="profile">
    <h1 class="title">Mi cuenta</h1>

    <!-- Datos usuario -->
    @if (usuario) {
    <section class="card">
        <h2 class="card-title">Datos del usuario</h2>

        <div class="grid">
            <div class="row">
                <span class="label">Nombre</span>
                <span class="value">{{ usuario.nombre }} {{ usuario.apellido }}</span>
            </div>

            <div class="row">
                <span class="label">Email</span>
                <span class="value">{{ usuario.email }}</span>
            </div>

            <div class="row">
                <span class="label">Teléfono</span>
                <span class="value">{{ usuario.telefono }}</span>
            </div>

            <div class="row">
                <span class="label">DNI</span>
                <span class="value">{{ usuario.dni }}</span>
            </div>

            <div class="row">
                <span class="label">Edad</span>
                <span class="value">{{ usuario.edad }}</span>
            </div>

            <div class="row">
                <span class="label">Alergias</span>
                <span class="value">{{ usuario.alergias || '—' }}</span>
            </div>
        </div>
    </section>
    }

    <!-- Mis reservas -->
    <section class="card">
        <h2 class="card-title">Mis reservas</h2>

        @if (loading) {
        <p class="state">Cargando reservas…</p>
        }
        @if (!loading && error) {
        <p class="state error">{{ error }}</p>
        }

        @if (!loading && !error && reservas().length === 0) {
        <p class="state">
            No tienes reservas todavía.
        </p>
        }

        @if (!loading && !error && reservas().length > 0) {
        <div class="res-list">
            @for (r of reservas(); track r.id) {
            <article class="res-item">
                <div class="res-grid">
                    <div class="cell">
                        <span class="label">Fecha</span>
                        <span class="value">{{ r.fecha }}</span>
                    </div>

                    <div class="cell">
                        <span class="label">Hora</span>
                        <span class="value">{{ r.hora }}</span>
                    </div>

                    <div class="cell">
                        <span class="label">Personas</span>
                        <span class="value">{{ r.party_size }}</span>
                    </div>

                    <div class="cell">
                        <span class="label">Estado</span>
                        <span class="value">{{ estadoLabel(r.estado) }}</span>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn danger" (click)="cancelar(r)" [disabled]="r.estado === 'cancelada'">
                        Cancelar
                    </button>

                    <button class="btn" (click)="resenar(r)" [disabled]="!puedeResenar(r)">
                        Reseña
                    </button>
                </div>

                @if (r.resena) {
                <p class="review">
                    "{{ r.resena }}"
                </p>
                }
            </article>
            }
        </div>
        }
    </section>
</div>

