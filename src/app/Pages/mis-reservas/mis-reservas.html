<!-- Mis reservas -->
<!-- <section class="card">
    <div class="text-start">
        <button class="btn btn-outline-warning mb-4" routerLink="/perfil-usuario">
            <i class="bi bi-arrow-left me-2"></i> Volver a mi Perfil
        </button>
    </div>
   
    <h1 class="card-title">Mis reservas</h1>

    @if (loading()) {
    <p class="state">Cargando reservas…</p>
    }
    @if (!loading() && error()) {
    <p class="state error">{{ error() }}</p>
    }

    @if (!loading() && !error() && reservas().length === 0) {
    <p class="state">
        No tienes reservas todavía.
    </p>
    }

    @if (!loading() && !error() && reservas().length > 0) {
    <div class="res-list">
        @for (r of reservas(); track r.id) {
        <article class="res-item">
            <div class="res-grid">
                <div class="cell">
                    <span class="label">Fecha</span>
                    <span class="value">{{ r.fecha }}</span>
                </div>

                <div class="cell">
                    <span class="label">Hora</span>
                    <span class="value">{{ r.hora }}</span>
                </div>

                <div class="cell">
                    <span class="label">Personas</span>
                    <span class="value">{{ r.party_size }}</span>
                </div>

                <div class="cell">
                    <span class="label">Estado</span>
                    <span class="value">{{ estadoLabel(r.estado) }}</span>
                </div>
            </div>

            <div class="actions">
                <button class="btn btn-outline-like" (click)="cancelar(r)" [disabled]="r.estado === 'cancelada'">
                    Cancelar
                </button>

                <button class="btn btn-gold-like" (click)="resenar(r)" [disabled]="!puedeResenar(r)">
                    Reseña
                </button>
            </div>

            @if (r.resena) {
            <p class="review">
                "{{ r.resena }}"
            </p>
            }
        </article>
        }
    </div>
    }
</section> -->


<section class="card">
    <div class="header-actions">
        <button class="btn-nav" routerLink="/perfil-usuario">
            <i class="bi bi-arrow-left me-2"></i> Volver al Perfil
        </button>

        <button class="btn-nav" routerLink="/calendario" style="border-color: #e6dcc9; color: #e6dcc9;">
            <i class="bi bi-calendar3 me-2"></i> Ver Calendario
        </button>
    </div>

    <h1 class="card-title">Mis <span style="color: #e6dcc9;">Reservas</span></h1>

    @if (loading()) {
    <p class="state">Cargando tus reservas…</p>
    }
    @if (!loading() && error()) {
    <p class="state" style="color: #ffb4b4;">{{ error() }}</p>
    }

    @if (!loading() && !error() && reservas().length === 0) {
    <div class="state">
        <i class="bi bi-calendar-x mb-2" style="font-size: 2rem; display: block;"></i>
        No tienes reservas todavía.
    </div>
    }

    @if (!loading() && !error() && reservas().length > 0) {
    <div class="res-list">
        @for (r of reservas(); track r.id) {
        <article class="res-item">
            <div class="res-grid">
                <div class="cell">
                    <span class="label">Fecha</span>
                    <span class="value">{{ r.fecha }}</span>
                </div>

                <div class="cell">
                    <span class="label">Hora</span>
                    <span class="value">{{ formatearHora(r.hora) }} hs</span>
                </div>

                <div class="cell">
                    <span class="label">Personas</span>
                    <span class="value">{{ r.party_size }}</span>
                </div>

                <div class="cell">
                    <span class="label">Estado</span>
                    <span class="value" [style.color]="r.estado === 'confirmada' ? '#96ffbe' : ''">
                        {{ estadoLabel(r.estado) }}
                    </span>
                </div>
            </div>

            <div class="actions">
                <button class="btn-outline" (click)="cancelar(r)" [disabled]="r.estado === 'cancelada'">
                    Cancelar Reserva
                </button>

                <button class="btn-gold" (click)="resenar(r)" [disabled]="!puedeResenar(r)">
                    {{ r.resena ? 'Editar Reseña' : 'Escribir Reseña' }}
                </button>
            </div>

            @if (r.resena) {
            <p class="review">
                <i class="bi bi-quote me-2"></i>{{ r.resena }}
            </p>
            }
        </article>
        }
    </div>
    }
</section>